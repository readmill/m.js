<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>m.js testsuite</title>
    <link rel="stylesheet" href="./vendor/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>
    <script>
      document.write('<script src="../vendor/' + (location.hash.slice(1) || 'jquery') + '.js"></' + 'script>');
    </script>
    <script src="./vendor/let.js"></script>
    <script src="./vendor/chai.js"></script>
    <script src="./vendor/sinon.js"></script>
    <script src="./vendor/mocha.js"></script>
    <script src="./vendor/mocha.phantom.js"></script>
    <script src="../vendor/underscore.js"></script>
    <script src="../vendor/broadcast.js"></script>
    <script src="../vendor/soak.js"></script>
    <script src="../lib/m.js"></script>
    <script src="../lib/m/dom.js"></script>
    <script src="../lib/m/create.js"></script>
    <script src="../lib/m/remove.js"></script>
    <script src="../lib/m/sandbox.js"></script>
    <script src="../lib/m/events.js"></script>
    <script src="../lib/m/module.js"></script>
    <script>
      mocha.setup({
        ui: 'bdd',
        reporter: ~navigator.userAgent.indexOf("Phantom") ? PhantomReporter : Mocha.reporters.HTML
      });
      assert = chai.assert;
      sinon.assert.expose(assert, {prefix: ''});

      before(function () {
        let(this);
      });

      afterEach(function () {
        this.let.restore();
      });
    </script>
    <script src="./specs/create-spec.js"></script>
    <script src="./specs/remove-spec.js"></script>
    <script src="./specs/module-spec.js"></script>
    <script src="./specs/events-spec.js"></script>
    <script src="./specs/sandbox-spec.js"></script>
    <script>
      //mocha.checkLeaks();
      //mocha.globals(['_', 'jQuery', 'm']);
      mocha.run();
    </script>
  </body>
</html>
